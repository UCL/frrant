{% extends "research/base.html" %}
{% load i18n bootstrap4 %}

{% block heading %}
    {% blocktrans with name=form.instance.linked_field %}
        Link {{ name }} to antiquarian, work or book
    {% endblocktrans %}
{% endblock %}

{% block inner %}


    {# Use a GET form to select the work and antiquarian #}
    <form novalidate enctype="multipart/form-data" autocomplete='off' action='{{ request.path }}' class="form work-form" method='GET'>
        {% bootstrap_field form.antiquarian field_class='submit-on-change' %}
        {% bootstrap_field form.definite_antiquarian field_class='submit-on-change' %}

    </form>

    <form novalidate enctype="multipart/form-data" autocomplete='off' action='{{ request.path }}' class="form work-form" method='GET'>
        {% bootstrap_field form.work field_class='submit-on-change' %}
        {% bootstrap_field form.definite_work  field_class='submit-on-change'%}
        <input type='hidden' name='antiquarian' value='{{ antiquarian.pk }}' />
        <input type='hidden' name='definite_antiquarian' value='{{ definite_antiquarian }}' />

    </form>

    {# where a work has been specified add it as a hidden control and show the relevant books (if any) #}
    <form novalidate enctype="multipart/form-data" autocomplete='off' action='{{ request.path }}' class="form" method='POST'>
        {% csrf_token %}

        {% bootstrap_field form.book %}
        {% bootstrap_field form.definite_book %}

        <input type='hidden' name='antiquarian' value='{{ antiquarian.pk }}' />
        <input type='hidden' name='definite_antiquarian' value='{{ definite_antiquarian }}' />
        hello{{definite_antiquarian}}
        <input type='hidden' name='work' value='{{ work.pk }}' />
        <input type='hidden' name='definite_work' value='{{ definite_work }}' />
        <button type="submit" class="btn btn-primary">
            {% trans 'Create' %}
        </button>
        <button name='another' type="submit" class="btn btn-outline-primary">
            {% trans 'Create and add another' %}
        </button>

    </form>
{% endblock %}
