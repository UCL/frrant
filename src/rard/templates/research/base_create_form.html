{# Common form to create either a fragment or testimonium #}

{% extends "research/base.html" %}
{% load i18n bootstrap4 %}

{% block heading %}
    {{ title }}
    {% if owner_for %}
    <p><small>For {{ owner_for }}</small></p>
    {% endif %}
{% endblock %}

{% block inner %}

    <form novalidate enctype="multipart/form-data" autocomplete='off' action='{{ request.path }}' class="form" method='POST'>
        {% csrf_token %}

        {% include 'research/partials/citing_work_form_area.html' %}
        
        {% bootstrap_field forms.original_text.reference %}

        {% bootstrap_field forms.original_text.content field_class='d-none' %}
        {% include 'research/partials/rich_text_editor.html' with field=forms.original_text.content %}

        {% bootstrap_field forms.original_text.apparatus_criticus field_class='d-none' %}
        {% include 'research/partials/rich_text_editor.html' with field=forms.original_text.apparatus_criticus %}

        {% for field in forms.object %}
            {% bootstrap_field field %}
        {% endfor %}

        <button type="submit" class="btn btn-primary">
            {% trans 'Create' %}
        </button>

        {% if is_anonymous_fragment %}
        <button type="submit" name='then_add_links' value='general' class="btn btn-outline-primary">
            {% trans 'Create and Add Antiquarian/Work Link' %}
        </button>
        <button type="submit" name='then_add_links' value='fragment' class="btn btn-outline-primary">
            {% trans 'Create and Add Fragment Link' %}
        </button>
        {% else %}
        <button type="submit" name='then_add_links' class="btn btn-outline-primary">
            {% trans 'Create and Add Links' %}
        </button>
        {% endif %}

    </form>
{% endblock %}
