{% extends "research/list_base.html" %}
{% load i18n %}

{% block heading %}
    {% trans 'Concordance Table' %}
{% endblock %}

{% block action %}{% endblock %}

{% block displaying %}{% endblock %}

{% block inner %}

  {% if page_obj.paginator.count > 0 %}

    {% with max_length=column_range|length %}

    <style>
      .table-responsive {
        width: 100%;
        overflow: auto;
      }
      td, th {
        white-space: nowrap;
      }
    </style>


<div class=" table-responsive">
    <table class="table table-hover">
      <thead>
        <tr>
          <th scope="col">FRRAnt</th>
          {% for i in column_range %}
          <th scope="col">Author {{ forloop.counter }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody class='alphabetum'>
        {% for object in page_obj %}
          <tr>
              <td>
                {% if object.content_type.name == 'fragment' %}
                  <a href='{{ object.owner.get_absolute_url }}'>{{ object.owner.get_first_name }}</a>
                {% elif object.content_type.name == 'anonymous fragment' %}
                  <a href='{{ object.owner.get_absolute_url }}'>{{ object.owner.get_display_name }}</a>
                {% endif %}
              </td>

          {# NB the object here is a FragmentLink object #}
          {% for c in object.concordance_set.all %}
              <td {% if forloop.last %}{% if forloop.counter < max_length %}colspan='{{ max_length }}'{% endif %}{% endif %}>
                {{ c.source }} {{ c.identifier }}
              </td>
          {% endfor %}
            </tr>
        {% endfor %}
      </tbody>
    </table>
</div>
    {% endwith %}

  {% endif %}

  {{ block.super }}


{% endblock %}
