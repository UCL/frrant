{% extends "research/list_base.html" %}
{% load i18n %}

{% block heading %}
    {% trans 'Concordance Table' %}
{% endblock %}

{% block action %}{% endblock %}

{% block displaying %}{% endblock %}

{% block inner %}

  {% if page_obj.paginator.count > 0 %}

    <table class="table">
      <thead>
        <tr>
          <th scope="col">Author One</th>
          <th scope="col">Author Two</th>
        </tr>
      </thead>
      <tbody class='alphabetum'>
        {% for object in page_obj %}

          {# NB the object here is a FragmentLink object #}

          {% for duplet in object.get_concordance_identifiers %}
            {% with identifier=duplet.0 original_text=duplet.1 %}
            <tr>
              <td>
                  <a href='{{ original_text.owner.get_absolute_url }}'>FRRAnt {{ identifier }}</a>
              </td>
              <td>
                {% for c in original_text.concordance_set.all %}
                {% if forloop.counter0 != 0 and forloop.outer.counter0 != 0 %}, {% endif %}{{ c.source }} {{ c.identifier }}
                {% endfor %}
              </td>
            </tr>
            {% endwith %}
          {% endfor %}
        {% endfor %}
      </tbody>
    </table>

  {% endif %}

  {{ block.super }}


{% endblock %}